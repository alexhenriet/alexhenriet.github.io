<p><a href="https://npmjs.com/package/postcss-load-config"><img src="https://img.shields.io/npm/v/postcss-load-config.svg" alt="npm" /></a>
<a href="https://nodejs.org/"><img src="https://img.shields.io/node/v/postcss-load-plugins.svg" alt="node" /></a>
<a href="https://david-dm.org/michael-ciniawsky/postcss-load-config"><img src="https://david-dm.org/michael-ciniawsky/postcss-load-config.svg" alt="deps" /></a>
<a href="https://travis-ci.org/michael-ciniawsky/postcss-load-config"><img src="http://img.shields.io/travis/michael-ciniawsky/postcss-load-config.svg" alt="test" /></a>
<a href="https://coveralls.io/github/michael-ciniawsky/postcss-load-config"><img src="https://coveralls.io/repos/github/michael-ciniawsky/postcss-load-config/badge.svg" alt="coverage" /></a>
<a href="http://standardjs.com/"><img src="https://img.shields.io/badge/code%20style-standard-yellow.svg" alt="code style" /></a>
<a href="https://gitter.im/postcss/postcss"><img src="https://img.shields.io/gitter/room/postcss/postcss.svg" alt="chat" /></a></p>

<div align="center">
  <img width="100" height="100" title="Load Options" src="http://michael-ciniawsky.github.io/postcss-load-options/logo.svg">
  <a href="https://github.com/postcss/postcss">
    <img width="110" height="110" title="PostCSS"           src="http://postcss.github.io/postcss/logo.svg" hspace="10">
  </a>
  <img width="100" height="100" title="Load Plugins" src="http://michael-ciniawsky.github.io/postcss-load-plugins/logo.svg">
  <h1>Load Config</h1>
</div>

<h2 align="center">Install</h2>

<pre><code class="bash">npm i -D postcss-load-config
</code></pre>

<h2 align="center">Usage</h2>

<pre><code class="bash">npm i -S|-D postcss-plugin
</code></pre>

<p>Install all required postcss plugins and save them to your <strong>package.json</strong> <code>dependencies</code>/<code>devDependencies</code></p>

<p>Then create a postcss config file by choosing one of the following formats</p>

<h3 id="%60package.json%60"><code>package.json</code></h3>

<p>Create a <strong><code>postcss</code></strong> section in your project's <strong><code>package.json</code></strong></p>

<pre><code>Project (Root)
  |– client
  |– public
  |
  |- package.json
</code></pre>

<pre><code class="json">{
  "postcss": {
    "parser": "sugarss",
    "map": false,
    "plugins": {
      "postcss-plugin": {}
    }
  }
}
</code></pre>

<h3 id="%60.postcssrc%60"><code>.postcssrc</code></h3>

<p>Create a <strong><code>.postcssrc</code></strong> file in JSON or YAML format</p>

<blockquote>
  <p>ℹ️ It's recommended to use an extension (e.g <strong><code>.postcssrc.json</code></strong> or <strong><code>.postcssrc.yml</code></strong>) instead of <code>.postcssrc</code></p>
</blockquote>

<pre><code>Project (Root)
  |– client
  |– public
  |
  |- (.postcssrc|.postcssrc.json|.postcssrc.yml)
  |- package.json
</code></pre>

<p><strong><code>.postcssrc.json</code></strong></p>

<pre><code class="json">{
  "parser": "sugarss",
  "map": false,
  "plugins": {
    "postcss-plugin": {}
  }
}
</code></pre>

<p><strong><code>.postcssrc.yml</code></strong></p>

<pre><code class="yaml">parser: sugarss
map: false
plugins:
  postcss-plugin: {}
</code></pre>

<h3 id="%60.postcssrc.js%60-or-%60postcss.config.js%60"><code>.postcssrc.js</code> or <code>postcss.config.js</code></h3>

<p>You may need some logic within your config. In this case create JS file named <strong><code>.postcssrc.js</code></strong> or <strong><code>postcss.config.js</code></strong></p>

<pre><code>Project (Root)
  |– client
  |– public
  |
  |- (.postcssrc.js|postcss.config.js)
  |- package.json
</code></pre>

<p>You can export the config as an <code>{Object}</code></p>

<p><strong>.postcssrc.js</strong></p>

<pre><code class="js">module.exports = {
  parser: 'sugarss',
  map: false,
  plugins: {
    'postcss-plugin': {}
  }
}
</code></pre>

<p>Or export a <code>{Function}</code> that returns the config (more about the <code>ctx</code> param below)</p>

<p><strong>.postcssrc.js</strong></p>

<pre><code class="js">module.exports = (ctx) =&gt; ({
  parser: ctx.parser ? 'sugarss' : false,
  map: ctx.env === 'development' ? ctx.map : false,
  plugins: {
    'postcss-plugin': ctx.options.plugin
  }
})
</code></pre>

<p>Plugins can be loaded either using an <code>{Object}</code> or an <code>{Array}</code></p>

<h4 id="%60%7Bobject%7D%60"><code>{Object}</code></h4>

<p><strong>.postcssrc.js</strong></p>

<pre><code class="js">module.exports = ({ env }) =&gt; ({
  ...options,
  plugins: {
    'postcss-plugin': env === 'production' ? {} : false
  }
})
</code></pre>

<h4 id="%60%7Barray%7D%60"><code>{Array}</code></h4>

<p><strong>.postcssrc.js</strong></p>

<pre><code class="js">module.exports = ({ env }) =&gt; ({
  ...options,
  plugins: [
    env === 'production' ? require('postcss-plugin')() : false
  ]
})
</code></pre>

<blockquote>
  <p>:warning: When using an <code>{Array}</code>, make sure to <code>require()</code> each plugin</p>
</blockquote>

<h2 align="center">Options</h2>

<table>
<thead>
<tr>
  <th align="center">Name</th>
  <th align="center">Type</th>
  <th align="center">Default</th>
  <th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td align="center"><a href="#to"><strong><code>to</code></strong></a></td>
  <td align="center"><code>{String}</code></td>
  <td align="center"><code>undefined</code></td>
  <td align="left">Destination File Path</td>
</tr>
<tr>
  <td align="center"><a href="#map"><strong><code>map</code></strong></a></td>
  <td align="center"><code>{String\|Object}</code></td>
  <td align="center"><code>false</code></td>
  <td align="left">Enable/Disable Source Maps</td>
</tr>
<tr>
  <td align="center"><a href="#from"><strong><code>from</code></strong></a></td>
  <td align="center"><code>{String}</code></td>
  <td align="center"><code>undefined</code></td>
  <td align="left">Source File Path</td>
</tr>
<tr>
  <td align="center"><a href="#parser"><strong><code>parser</code></strong></a></td>
  <td align="center"><code>{String\|Function}</code></td>
  <td align="center"><code>false</code></td>
  <td align="left">Custom PostCSS Parser</td>
</tr>
<tr>
  <td align="center"><a href="#syntax"><strong><code>syntax</code></strong></a></td>
  <td align="center"><code>{String\|Function}</code></td>
  <td align="center"><code>false</code></td>
  <td align="left">Custom PostCSS Syntax</td>
</tr>
<tr>
  <td align="center"><a href="#stringifier"><strong><code>stringifier</code></strong></a></td>
  <td align="center"><code>{String\|Function}</code></td>
  <td align="center"><code>false</code></td>
  <td align="left">Custom PostCSS Stringifier</td>
</tr>
</tbody>
</table>

<h3 id="%60parser%60"><code>parser</code></h3>

<p><strong>.postcssrc.js</strong></p>

<pre><code class="js">module.exports = {
  parser: 'sugarss'
}
</code></pre>

<h3 id="%60syntax%60"><code>syntax</code></h3>

<p><strong>.postcssrc.js</strong></p>

<pre><code class="js">module.exports = {
  syntax: 'postcss-scss'
}
</code></pre>

<h3 id="%60stringifier%60"><code>stringifier</code></h3>

<p><strong>.postcssrc.js</strong></p>

<pre><code class="js">module.exports = {
  stringifier: 'midas'
}
</code></pre>

<h3 id="%2A%2A%60map%60%2A%2A"><a href="https://github.com/postcss/postcss/blob/master/docs/source-maps.md"><strong><code>map</code></strong></a></h3>

<p><strong>.postcssrc.js</strong></p>

<pre><code class="js">module.exports = {
  map: 'inline'
}
</code></pre>

<blockquote>
  <p>:warning: In most cases <code>options.from</code> &amp;&amp; <code>options.to</code> are set by the third-party which integrates this package (CLI, gulp, webpack). It's unlikely one needs to set/use <code>options.from</code> &amp;&amp; <code>options.to</code> within a config file. Unless you're a third-party plugin author using this module and its Node API directly <strong>dont't set <code>options.from</code> &amp;&amp; <code>options.to</code> yourself</strong></p>
</blockquote>

<h3 id="%60to%60"><code>to</code></h3>

<pre><code class="js">module.exports = {
  to: 'path/to/dest.css'
}
</code></pre>

<h3 id="%60from%60"><code>from</code></h3>

<pre><code class="js">module.exports = {
  from: 'path/to/src.css'
}
</code></pre>

<h2 align="center">Plugins</h2>

<h3 id="%60%7B%7D-%7C%7C-null%60"><code>{} || null</code></h3>

<p>The plugin will be loaded with defaults</p>

<pre><code class="js">'postcss-plugin': {} || null
</code></pre>

<p><strong>.postcssrc.js</strong></p>

<pre><code class="js">module.exports = {
  plugins: {
    'postcss-plugin': {} || null
  }
}
</code></pre>

<blockquote>
  <p>:warning: <code>{}</code> must be an <strong>empty</strong> <code>{Object}</code> literal</p>
</blockquote>

<h3 id="%60%7Bobject%7D%60"><code>{Object}</code></h3>

<p>The plugin will be loaded with given options</p>

<pre><code class="js">'postcss-plugin': { option: '', option: '' }
</code></pre>

<p><strong>.postcssrc.js</strong></p>

<pre><code class="js">module.exports = {
  plugins: {
    'postcss-plugin': { option: '', option: '' }
  }
}
</code></pre>

<h3 id="%60false%60"><code>false</code></h3>

<p>The plugin will not be loaded</p>

<pre><code class="js">'postcss-plugin': false
</code></pre>

<p><strong>.postcssrc.js</strong></p>

<pre><code class="js">module.exports = {
  plugins: {
    'postcss-plugin': false
  }
}
</code></pre>

<h3 id="%60ordering%60"><code>Ordering</code></h3>

<p>Plugin <strong>execution order</strong> is determined by declaration in the plugins section (<strong>top-down</strong>)</p>

<pre><code class="js">{
  plugins: {
    'postcss-plugin': {}, // [0]
    'postcss-plugin': {}, // [1]
    'postcss-plugin': {}  // [2]
  }
}
</code></pre>

<h2 align="center">Context</h2>

<p>When using a <code>{Function}</code> (<code>postcss.config.js</code> or <code>.postcssrc.js</code>), it's possible to pass context to <code>postcss-load-config</code>, which will be evaluated while loading your config. By default <code>ctx.env (process.env.NODE_ENV)</code> and <code>ctx.cwd (process.cwd())</code> are available on the <code>ctx</code> <code>{Object}</code></p>

<blockquote>
  <p>ℹ️ Most third-party integrations add additional properties to the <code>ctx</code> (e.g <code>postcss-loader</code>). Check the specific module's README for more information about what is available on the respective <code>ctx</code></p>
</blockquote>

<h2 align="center">Examples</h2>

<p><strong>postcss.config.js</strong></p>

<pre><code class="js">module.exports = (ctx) =&gt; ({
  parser: ctx.parser ? 'sugarss' : false,
  map: ctx.env === 'development' ? ctx.map : false,
  plugins: {
    'postcss-import': {},
    'postcss-nested': {},
    cssnano: ctx.env === 'production' ? {} : false
  }
})
</code></pre>

<div align="center">
  <img width="80" height="80" src="https://worldvectorlogo.com/logos/nodejs-icon.svg">
</div>

<pre><code class="json">"scripts": {
  "build": "NODE_ENV=production node postcss",
  "start": "NODE_ENV=development node postcss"
}
</code></pre>

<h3 id="%60async%60"><code>Async</code></h3>

<pre><code class="js">const { readFileSync } = require('fs')

const postcss = require('postcss')
const postcssrc = require('postcss-load-config')

const css = readFileSync('index.sss', 'utf8')

const ctx = { parser: true, map: 'inline' }

postcssrc(ctx).then(({ plugins, options }) =&gt; {
  postcss(plugins)
    .process(css, options)
    .then((result) =&gt; console.log(result.css))
})
</code></pre>

<h3 id="%60sync%60"><code>Sync</code></h3>

<pre><code class="js">const { readFileSync } = require('fs')

const postcss = require('postcss')
const postcssrc = require('postcss-load-config')

const css = readFileSync('index.sss', 'utf8')

const ctx = { parser: true, map: 'inline' }

const { plugins, options } = postcssrc.sync(ctx)
</code></pre>

<div align="center">
  <img width="80" height="80" halign="10" src="https://worldvectorlogo.com/logos/gulp.svg">
</div>

<pre><code class="json">"scripts": {
  "build": "NODE_ENV=production gulp",
  "start": "NODE_ENV=development gulp"
}
</code></pre>

<pre><code class="js">const { task, src, dest, series, watch } = require('gulp')

const postcss = require('gulp-postcssrc')

const css = () =&gt; {
  src('src/*.css')
    .pipe(postcss())
    .pipe(dest('dest'))
})

task('watch', () =&gt; {
  watch(['src/*.css', 'postcss.config.js'], css)
})

task('default', series(css, 'watch'))
</code></pre>

<div align="center">
  <img width="80" height="80" src="https://cdn.rawgit.com/webpack/media/e7485eb2/logo/icon.svg">
</div>

<pre><code class="json">"scripts": {
  "build": "NODE_ENV=production webpack",
  "start": "NODE_ENV=development webpack-dev-server"
}
</code></pre>

<p><strong>webpack.config.js</strong></p>

<pre><code class="js">module.exports = (env) =&gt; ({
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [
          'style-loader',
          'css-loader',
          'postcss-loader'
        ]
      }
    ]
  }
})
</code></pre>

<h2 align="center">Maintainers</h2>

<table>
  <tbody>
   <tr>
    <td align="center">
      <img width="150" height="150"
        src="https://github.com/michael-ciniawsky.png?v=3&s=150">
      <br />
      <a href="https://github.com/michael-ciniawsky">Michael Ciniawsky</a>
    </td>
    <td align="center">
      <img width="150" height="150"
        src="https://github.com/ertrzyiks.png?v=3&s=150">
      <br />
      <a href="https://github.com/ertrzyiks">Mateusz Derks</a>
    </td>
  </tr>
  <tbody>
</table>

<h2 align="center">Contributors</h2>

<table>
  <tbody>
   <tr>
    <td align="center">
      <img width="150" height="150"
        src="https://github.com/sparty02.png?v=3&s=150">
      <br />
      <a href="https://github.com/sparty02">Ryan Dunckel</a>
    </td>
    <td align="center">
      <img width="150" height="150"
        src="https://github.com/pcgilday.png?v=3&s=150">
      <br />
      <a href="https://github.com/pcgilday">Patrick Gilday</a>
    </td>
    <td align="center">
      <img width="150" height="150"
        src="https://github.com/daltones.png?v=3&s=150">
      <br />
      <a href="https://github.com/daltones">Dalton Santos</a>
    </td>
    <td align="center">
      <img width="150" height="150"
        src="https://github.com/fwouts.png?v=3&s=150">
      <br />
      <a href="https://github.com/fwouts">François Wouts</a>
    </td>
  </tr>
  <tbody>
</table>

<h2 id="security-contact">Security Contact</h2>

<p>To report a security vulnerability, please use the <a href="https://tidelift.com/security">Tidelift security contact</a>.
Tidelift will coordinate the fix and disclosure.</p>
